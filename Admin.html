<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description"
        content="MedVault Admin Dashboard ‚Äî Manage doctors, receptionists, patients, and view clinic analytics." />
    <title>MedVault ‚Äî Admin Dashboard</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/admin.css" />
</head>

<body>
    <div class="dashboard-layout">
        <!-- ====== SIDEBAR ====== -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">üè•</div>
                <span class="sidebar-brand">MedVault</span>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-section-title">Main</div>
                <a class="nav-item active" data-page="overview" onclick="switchPage('overview', this)">
                    <span class="nav-icon">üìä</span> Overview
                </a>
                <a class="nav-item" data-page="doctors" onclick="switchPage('doctors', this)">
                    <span class="nav-icon">üë®‚Äç‚öïÔ∏è</span> Doctors
                </a>
                <a class="nav-item" data-page="receptionists" onclick="switchPage('receptionists', this)">
                    <span class="nav-icon">üßë‚Äçüíº</span> Receptionists
                </a>
                <a class="nav-item" data-page="patients" onclick="switchPage('patients', this)">
                    <span class="nav-icon">üßë‚Äçü§ù‚Äçüßë</span> Patients
                </a>
                <a class="nav-item" data-page="appointments" onclick="switchPage('appointments', this)">
                    <span class="nav-icon">üìÖ</span> Appointments
                </a>

                <div class="nav-section-title">System</div>
                <a class="nav-item" data-page="settings" onclick="switchPage('settings', this)">
                    <span class="nav-icon">‚öôÔ∏è</span> Settings
                </a>
            </nav>
            <div class="sidebar-footer">
                <a class="nav-item" onclick="logoutUser()" style="color:var(--danger)">
                    <span class="nav-icon">üö™</span> Logout
                </a>
            </div>
        </aside>

        <!-- ====== MAIN CONTENT ====== -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="topbar">
                <div class="topbar-left">
                    <button class="btn btn-icon mobile-menu-btn" onclick="toggleSidebar()">‚ò∞</button>
                    <h1 class="topbar-title" id="page-title">Overview</h1>
                </div>
                <div class="topbar-right">
                    <span class="topbar-user-name" id="admin-name">Admin</span>
                    <div class="topbar-avatar" id="admin-avatar">A</div>
                </div>
            </header>

            <!-- ====== PAGE: OVERVIEW ====== -->
            <div class="page-content page-section active" id="page-overview">
                <!-- Stats Row -->
                <div class="grid grid-4 mb-lg" id="stats-row">
                    <div class="glass-card stat-card fade-in">
                        <div class="stat-icon stat-icon-patients">üë•</div>
                        <div class="stat-value" id="stat-patients">0</div>
                        <div class="stat-label">Total Patients</div>
                    </div>
                    <div class="glass-card stat-card fade-in">
                        <div class="stat-icon stat-icon-doctors">üë®‚Äç‚öïÔ∏è</div>
                        <div class="stat-value" id="stat-doctors">0</div>
                        <div class="stat-label">Total Doctors</div>
                    </div>
                    <div class="glass-card stat-card fade-in">
                        <div class="stat-icon stat-icon-appointments">üìÖ</div>
                        <div class="stat-value" id="stat-appointments">0</div>
                        <div class="stat-label">Monthly Appointments</div>
                    </div>
                    <div class="glass-card stat-card fade-in">
                        <div class="stat-icon stat-icon-revenue">üí∞</div>
                        <div class="stat-value" id="stat-revenue">Rs 0</div>
                        <div class="stat-label">Revenue (Simulated)</div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="grid grid-2 mb-lg">
                    <div class="glass-card fade-in">
                        <h3 style="margin-bottom:var(--spacing-md)">Appointments This Week</h3>
                        <div class="chart-container">
                            <canvas id="chart-appointments"></canvas>
                        </div>
                    </div>
                    <div class="glass-card fade-in">
                        <h3 style="margin-bottom:var(--spacing-md)">Patients by Gender</h3>
                        <div class="chart-container">
                            <canvas id="chart-gender"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="glass-card fade-in">
                    <h3 style="margin-bottom:var(--spacing-md)">Recent Activity</h3>
                    <div id="recent-activity">
                        <div class="empty-state">
                            <div class="empty-state-icon">üìã</div>
                            <p>No recent activity yet.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ====== PAGE: DOCTORS ====== -->
            <div class="page-content page-section" id="page-doctors" style="display:none">
                <div class="section-header">
                    <div class="search-bar">
                        <span class="search-bar-icon">üîç</span>
                        <input type="text" class="form-input" placeholder="Search doctors..." id="search-doctors"
                            oninput="filterTable('doctors')" />
                    </div>
                    <button class="btn btn-primary" onclick="openAddUserModal('Doctor')">+ Add Doctor</button>
                </div>
                <div class="glass-card">
                    <table class="data-table" id="doctors-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Joined</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="doctors-tbody">
                            <tr>
                                <td colspan="4" class="text-center" style="padding:40px">
                                    <div class="spinner" style="margin:0 auto"></div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ====== PAGE: RECEPTIONISTS ====== -->
            <div class="page-content page-section" id="page-receptionists" style="display:none">
                <div class="section-header">
                    <div class="search-bar">
                        <span class="search-bar-icon">üîç</span>
                        <input type="text" class="form-input" placeholder="Search receptionists..."
                            id="search-receptionists" oninput="filterTable('receptionists')" />
                    </div>
                    <button class="btn btn-primary" onclick="openAddUserModal('Receptionist')">+ Add
                        Receptionist</button>
                </div>
                <div class="glass-card">
                    <table class="data-table" id="receptionists-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Joined</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="receptionists-tbody">
                            <tr>
                                <td colspan="4" class="text-center" style="padding:40px">
                                    <div class="spinner" style="margin:0 auto"></div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ====== PAGE: PATIENTS ====== -->
            <div class="page-content page-section" id="page-patients" style="display:none">
                <div class="section-header">
                    <div class="search-bar">
                        <span class="search-bar-icon">üîç</span>
                        <input type="text" class="form-input" placeholder="Search patients..." id="search-patients"
                            oninput="filterTable('patients')" />
                    </div>
                </div>
                <div class="glass-card">
                    <table class="data-table" id="patients-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Age</th>
                                <th>Gender</th>
                                <th>Contact</th>
                                <th>Registered</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="patients-tbody">
                            <tr>
                                <td colspan="6" class="text-center" style="padding:40px">
                                    <div class="spinner" style="margin:0 auto"></div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ====== CHANGE ROLE MODAL ====== -->
            <div class="modal-overlay" id="change-role-modal">
                <div class="modal">
                    <div class="modal-header">
                        <h3>Change User Role</h3>
                        <button class="modal-close" onclick="closeModal('change-role-modal')">‚úï</button>
                    </div>
                    <form id="change-role-form" onsubmit="handleChangeRole(event)">
                        <input type="hidden" id="change-role-uid" />
                        <div class="form-group">
                            <label>User</label>
                            <input type="text" id="change-role-name" class="form-input" disabled />
                        </div>
                        <div class="form-group">
                            <label for="change-role-select">New Role</label>
                            <select id="change-role-select" class="form-input form-select" required>
                                <option value="Patient">Patient</option>
                                <option value="Doctor">Doctor</option>
                                <option value="Receptionist">Receptionist</option>
                                <option value="Admin">Admin</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg" id="change-role-btn"
                            style="width:100%;justify-content:center;margin-top:var(--spacing-md)">
                            Update Role
                        </button>
                    </form>
                </div>
            </div>

            <!-- ====== PAGE: APPOINTMENTS ====== -->
            <div class="page-content page-section" id="page-appointments" style="display:none">
                <div class="section-header">
                    <h3>All Appointments</h3>
                </div>
                <div class="glass-card">
                    <table class="data-table" id="appointments-table">
                        <thead>
                            <tr>
                                <th>Patient</th>
                                <th>Doctor</th>
                                <th>Date</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="appointments-tbody">
                            <tr>
                                <td colspan="4" class="text-center" style="padding:40px">
                                    <div class="spinner" style="margin:0 auto"></div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ====== PAGE: SETTINGS ====== -->
            <div class="page-content page-section" id="page-settings" style="display:none">
                <div class="glass-card" style="max-width:600px">
                    <h3 style="margin-bottom:var(--spacing-lg)">Admin Settings</h3>
                    <div class="form-group">
                        <label>Clinic Name</label>
                        <input type="text" class="form-input" id="setting-clinic-name" value="MedVault Clinic" />
                    </div>
                    <div class="form-group">
                        <label>Consultation Fee (Rs)</label>
                        <input type="number" class="form-input" id="setting-fee" value="500" />
                    </div>
                    <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
                </div>
            </div>
        </main>
    </div>

    <!-- ====== ADD USER MODAL ====== -->
    <div class="modal-overlay" id="add-user-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-title">Add Doctor</h3>
                <button class="modal-close" onclick="closeModal('add-user-modal')">‚úï</button>
            </div>
            <form id="add-user-form" onsubmit="handleAddUser(event)">
                <div class="form-group">
                    <label for="new-user-name">Full Name</label>
                    <input type="text" id="new-user-name" class="form-input" placeholder="Dr. Ahmed Khan" required />
                </div>
                <div class="form-group">
                    <label for="new-user-email">Email</label>
                    <input type="email" id="new-user-email" class="form-input" placeholder="doctor@clinic.com"
                        required />
                </div>
                <div class="form-group">
                    <label for="new-user-password">Password</label>
                    <input type="password" id="new-user-password" class="form-input" placeholder="Min 6 characters"
                        required minlength="6" />
                </div>
                <input type="hidden" id="new-user-role" value="Doctor" />
                <div style="display:flex;gap:var(--spacing-sm);justify-content:flex-end;margin-top:var(--spacing-lg)">
                    <button type="button" class="btn btn-secondary"
                        onclick="closeModal('add-user-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="modal-submit-btn">Create Account</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/admin.js"></script>
</body>

</html>